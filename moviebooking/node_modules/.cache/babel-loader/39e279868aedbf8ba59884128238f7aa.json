{"ast":null,"code":"var _jsxFileName = \"D:\\\\EAD-CW\\\\moviebooking\\\\src\\\\Pages\\\\UserPage.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport MoviesComponent from '../Components/Main/Main'; // Ensure the path is correct\nimport BookingModal from '../Pages/BookingModal'; // Ensure the path is correct\nimport './UserPage.css';\nimport userImage from '../assets/User.png';\nimport search_icon from '../assets/search_icon.png';\nconst handleLogout = navigate => {\n  localStorage.removeItem('token');\n  fetch('/api/auth/logout', {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(() => {\n    navigate('/');\n  });\n};\nconst UserPage = () => {\n  const [user, setUser] = useState(null);\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchText, setSearchText] = useState('');\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  const [selectedMovie, setSelectedMovie] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const userData = localStorage.getItem('user');\n    if (userData) {\n      try {\n        const parsedUser = JSON.parse(userData);\n        setUser(parsedUser);\n      } catch (error) {\n        console.error('Error parsing user data:', error);\n      }\n    } else {\n      navigate('/welcome', {\n        replace: true\n      });\n    }\n  }, [navigate]);\n  const handleBlur = () => {\n    if (!searchText) {\n      setIsSearching(false);\n    }\n  };\n  const handleInputChange = e => {\n    setSearchText(e.target.value);\n  };\n  const handleSearchIconClick = () => {\n    setIsSearching(true);\n  };\n  const handleToggleDropdown = () => {\n    setIsDropdownOpen(!isDropdownOpen);\n  };\n  const handleDropdownClick = action => {\n    if (action === 'logout') {\n      handleLogout(navigate);\n    } else if (action === 'settings') {\n      navigate('/settings');\n    }\n    setIsDropdownOpen(false);\n  };\n  const handleBookClick = movie => {\n    setSelectedMovie(movie);\n    setShowBookingModal(true);\n  };\n  const handleCloseBookingModal = () => {\n    setShowBookingModal(false);\n    setSelectedMovie(null);\n  };\n  const isLoggedIn = !!user;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"Hey Movies\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"userDetails\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, user ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Welcome, \", user.name || 'User')) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"No user data found\")), /*#__PURE__*/React.createElement(\"img\", {\n    src: userImage,\n    alt: \"user\",\n    className: \"user-image\",\n    onClick: handleToggleDropdown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: `dropdown-menu ${isDropdownOpen ? 'show' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"dropdown-item\",\n    onClick: () => handleDropdownClick('settings'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, \"Setting\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"dropdown-item\",\n    onClick: () => handleDropdownClick('logout'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, \"Log Out\")), isSearching ? /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: searchText,\n    onChange: handleInputChange,\n    onBlur: handleBlur,\n    placeholder: \"Search...\",\n    \"aria-label\": \"Search movies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    src: search_icon,\n    alt: \"Search\",\n    onClick: handleSearchIconClick,\n    className: \"search-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: () => isLoggedIn ? onBookClick(movie) : handleShowModal(movie),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, isLoggedIn ? \"Book\" : \"Details\"), selectedMovie && /*#__PURE__*/React.createElement(BookingModal, {\n    show: showBookingModal,\n    onHide: handleCloseBookingModal,\n    movieTitle: selectedMovie.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }));\n};\nexport default UserPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","MoviesComponent","BookingModal","userImage","search_icon","handleLogout","navigate","localStorage","removeItem","fetch","method","headers","then","UserPage","user","setUser","isSearching","setIsSearching","searchText","setSearchText","isDropdownOpen","setIsDropdownOpen","showBookingModal","setShowBookingModal","selectedMovie","setSelectedMovie","userData","getItem","parsedUser","JSON","parse","error","console","replace","handleBlur","handleInputChange","e","target","value","handleSearchIconClick","handleToggleDropdown","handleDropdownClick","action","handleBookClick","movie","handleCloseBookingModal","isLoggedIn","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","name","src","alt","onClick","type","onChange","onBlur","placeholder","Button","variant","onBookClick","handleShowModal","show","onHide","movieTitle","title"],"sources":["D:/EAD-CW/moviebooking/src/Pages/UserPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport MoviesComponent from '../Components/Main/Main'; // Ensure the path is correct\r\nimport BookingModal from '../Pages/BookingModal'; // Ensure the path is correct\r\nimport './UserPage.css';\r\nimport userImage from '../assets/User.png';\r\nimport search_icon from '../assets/search_icon.png';\r\n\r\nconst handleLogout = (navigate) => {\r\n  localStorage.removeItem('token');\r\n  fetch('/api/auth/logout', {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  }).then(() => {\r\n    navigate('/');\r\n  });\r\n};\r\n\r\nconst UserPage = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const [showBookingModal, setShowBookingModal] = useState(false);\r\n  const [selectedMovie, setSelectedMovie] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem('user');\r\n    if (userData) {\r\n      try {\r\n        const parsedUser = JSON.parse(userData);\r\n        setUser(parsedUser);\r\n      } catch (error) {\r\n        console.error('Error parsing user data:', error);\r\n      }\r\n    } else {\r\n      navigate('/welcome', { replace: true });\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleBlur = () => {\r\n    if (!searchText) {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setSearchText(e.target.value);\r\n  };\r\n\r\n  const handleSearchIconClick = () => {\r\n    setIsSearching(true);\r\n  };\r\n\r\n  const handleToggleDropdown = () => {\r\n    setIsDropdownOpen(!isDropdownOpen);\r\n  };\r\n\r\n  const handleDropdownClick = (action) => {\r\n    if (action === 'logout') {\r\n      handleLogout(navigate);\r\n    } else if (action === 'settings') {\r\n      navigate('/settings');\r\n    }\r\n    setIsDropdownOpen(false);\r\n  };\r\n\r\n  const handleBookClick = (movie) => {\r\n    setSelectedMovie(movie);\r\n    setShowBookingModal(true);\r\n  };\r\n\r\n  const handleCloseBookingModal = () => {\r\n    setShowBookingModal(false);\r\n    setSelectedMovie(null);\r\n  };\r\n\r\n  const isLoggedIn = !!user;\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"navbar\">\r\n        <h1 className=\"logo\">Hey Movies</h1>\r\n\r\n        <div className=\"navbar-right\">\r\n          <div className=\"userDetails\">\r\n            {user ? (\r\n              <div>\r\n                <p>Welcome, {user.name || 'User'}</p>\r\n              </div>\r\n            ) : (\r\n              <p>No user data found</p>\r\n            )}\r\n          </div>\r\n          <img\r\n            src={userImage}\r\n            alt=\"user\"\r\n            className=\"user-image\"\r\n            onClick={handleToggleDropdown}\r\n          />\r\n\r\n          <div className={`dropdown-menu ${isDropdownOpen ? 'show' : ''}`}>\r\n            <li className=\"dropdown-item\" onClick={() => handleDropdownClick('settings')}>Setting</li>\r\n            <li className=\"dropdown-item\" onClick={() => handleDropdownClick('logout')}>Log Out</li>\r\n          </div>\r\n\r\n          {isSearching ? (\r\n            <input\r\n              type=\"text\"\r\n              value={searchText}\r\n              onChange={handleInputChange}\r\n              onBlur={handleBlur}\r\n              placeholder=\"Search...\"\r\n              aria-label=\"Search movies\"\r\n            />\r\n          ) : (\r\n            <img\r\n              src={search_icon}\r\n              alt=\"Search\"\r\n              onClick={handleSearchIconClick}\r\n              className=\"search-icon\"\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n      <Button\r\n  variant=\"primary\"\r\n  onClick={() => isLoggedIn ? onBookClick(movie) : handleShowModal(movie)}\r\n>\r\n  {isLoggedIn ? \"Book\" : \"Details\"}\r\n</Button>\r\n\r\n      {selectedMovie && (\r\n        <BookingModal\r\n          show={showBookingModal}\r\n          onHide={handleCloseBookingModal}\r\n          movieTitle={selectedMovie.title}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}