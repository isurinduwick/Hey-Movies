{"ast":null,"code":"var _jsxFileName = \"D:\\\\EAD-CW\\\\moviebooking\\\\src\\\\Pages\\\\UserPage.jsx\";\nimport './UserPage.css';\nimport search_icon from '../assets/search_icon.png';\nimport React, { useState, useEffect } from 'react';\nimport { replace, useNavigate } from 'react-router-dom';\nimport userImage from '../assets/User.png';\nimport MoviesComponent from '../Components/';\n\n// Logout function\nconst handleLogout = navigate => {\n  // Remove JWT token from localStorage\n  localStorage.removeItem('token');\n\n  // Optionally, send a request to the backend logout endpoint\n  fetch('/api/auth/logout', {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n      // No need to include the token if it's already removed\n    }\n  }).then(() => {\n    // Navigate to the login page\n    navigate('/');\n  });\n};\nconst UserPage = () => {\n  const [user, setUser] = useState(null);\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchText, setSearchText] = useState('');\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const userData = localStorage.getItem('user');\n    if (userData) {\n      try {\n        const parsedUser = JSON.parse(userData);\n        console.log('Parsed user data:', parsedUser);\n        setUser(parsedUser);\n      } catch (error) {\n        console.error('Error parsing user data:', error);\n      }\n    } else {\n      console.log('No user data found in localStorage');\n      navigate('/welcome', {\n        replace: true\n      });\n    }\n  }, [navigate]);\n  const handleBlur = () => {\n    if (!searchText) {\n      setIsSearching(false);\n    }\n  };\n  const handleInputChange = e => {\n    setSearchText(e.target.value);\n  };\n  const handleSearchIconClick = () => {\n    setIsSearching(true);\n  };\n  const handleToggleDropdown = () => {\n    setIsDropdownOpen(!isDropdownOpen);\n  };\n  const handleDropdownClick = action => {\n    if (action === 'logout') {\n      handleLogout(navigate);\n    } else if (action === 'settings') {\n      navigate('/settings');\n    }\n    setIsDropdownOpen(false);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, \"Hey Movies\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"userDetails\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, user ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, \"Welcome, \", user.name || 'User')) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"No user data found\")), /*#__PURE__*/React.createElement(\"img\", {\n    src: userImage,\n    alt: \"user\",\n    className: \"user-image\",\n    onClick: handleToggleDropdown // Toggle dropdown when image is clicked\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: `dropdown-menu ${isDropdownOpen ? 'show' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"dropdown-item\",\n    onClick: () => handleDropdownClick('settings'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, \"Setting\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"dropdown-item\",\n    onClick: () => handleDropdownClick('logout'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, \"Log Out\")), isSearching ? /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: searchText,\n    onChange: handleInputChange,\n    onBlur: handleBlur,\n    placeholder: \"Search...\",\n    \"aria-label\": \"Search movies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    src: search_icon,\n    alt: \"Search\",\n    onClick: handleSearchIconClick,\n    className: \"search-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(MoviesComponent, {\n    buttonText: \"Book\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }));\n};\nexport default UserPage;","map":{"version":3,"names":["search_icon","React","useState","useEffect","replace","useNavigate","userImage","MoviesComponent","handleLogout","navigate","localStorage","removeItem","fetch","method","headers","then","UserPage","user","setUser","isSearching","setIsSearching","searchText","setSearchText","isDropdownOpen","setIsDropdownOpen","userData","getItem","parsedUser","JSON","parse","console","log","error","handleBlur","handleInputChange","e","target","value","handleSearchIconClick","handleToggleDropdown","handleDropdownClick","action","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","name","src","alt","onClick","type","onChange","onBlur","placeholder","buttonText"],"sources":["D:/EAD-CW/moviebooking/src/Pages/UserPage.jsx"],"sourcesContent":["import './UserPage.css';\r\nimport search_icon from '../assets/search_icon.png';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { replace, useNavigate } from 'react-router-dom';\r\nimport userImage from '../assets/User.png';\r\nimport MoviesComponent from '../Components/'; \r\n\r\n// Logout function\r\nconst handleLogout = (navigate) => {\r\n    // Remove JWT token from localStorage\r\n    localStorage.removeItem('token');\r\n    \r\n    // Optionally, send a request to the backend logout endpoint\r\n    fetch('/api/auth/logout', {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            // No need to include the token if it's already removed\r\n        },\r\n    }).then(() => {\r\n        // Navigate to the login page\r\n        navigate('/');\r\n    });\r\n};\r\n\r\nconst UserPage = () => {\r\n    const [user, setUser] = useState(null);\r\n    const [isSearching, setIsSearching] = useState(false);\r\n    const [searchText, setSearchText] = useState('');\r\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const userData = localStorage.getItem('user');\r\n\r\n        if (userData) {\r\n            try {\r\n                const parsedUser = JSON.parse(userData);\r\n                console.log('Parsed user data:', parsedUser);\r\n                setUser(parsedUser);\r\n            } catch (error) {\r\n                console.error('Error parsing user data:', error);\r\n            }\r\n        } else {\r\n            console.log('No user data found in localStorage');\r\n            navigate('/welcome', { replace: true });\r\n        }\r\n    }, [navigate]);\r\n\r\n    const handleBlur = () => {\r\n        if (!searchText) {\r\n            setIsSearching(false);\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        setSearchText(e.target.value);\r\n    };\r\n\r\n    const handleSearchIconClick = () => {\r\n        setIsSearching(true);\r\n    };\r\n\r\n    const handleToggleDropdown = () => {\r\n        setIsDropdownOpen(!isDropdownOpen);\r\n    };\r\n\r\n    const handleDropdownClick = (action) => {\r\n        if (action === 'logout') {\r\n            handleLogout(navigate);\r\n        } else if (action === 'settings') {\r\n  \r\n           navigate('/settings');\r\n        }\r\n        setIsDropdownOpen(false); \r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"navbar\">\r\n                <h1 className=\"logo\">Hey Movies</h1>\r\n\r\n                <div className=\"navbar-right\">\r\n                    {/* User image with dropdown toggle */}\r\n                    <div className=\"userDetails\">\r\n                {user ? (\r\n                    <div>\r\n                        <p>Welcome, {user.name || 'User'}</p>\r\n                    </div>\r\n                ) : (\r\n                    <p>No user data found</p>\r\n                )}\r\n            </div>\r\n                    <img\r\n                        src={userImage}\r\n                        alt=\"user\"\r\n                        className=\"user-image\"\r\n                        onClick={handleToggleDropdown} // Toggle dropdown when image is clicked\r\n                    />\r\n\r\n                    <div className={`dropdown-menu ${isDropdownOpen ? 'show' : ''}`}>\r\n                        <li className=\"dropdown-item\" onClick={() => handleDropdownClick('settings')}>Setting</li>\r\n                        <li className=\"dropdown-item\" onClick={() => handleDropdownClick('logout')}>Log Out</li>\r\n                    </div>\r\n                    {/* Search input or search icon */}\r\n                    {isSearching ? (\r\n                        <input\r\n                            type=\"text\"\r\n                            value={searchText}\r\n                            onChange={handleInputChange}\r\n                            onBlur={handleBlur}\r\n                            placeholder=\"Search...\"\r\n                            aria-label=\"Search movies\"\r\n                        />\r\n                    ) : (\r\n                        <img\r\n                            src={search_icon}\r\n                            alt=\"Search\"\r\n                            onClick={handleSearchIconClick}\r\n                            className=\"search-icon\"\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <MoviesComponent buttonText=\"Book\" />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default UserPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}